<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Qu·∫£n l√Ω d·ªØ li·ªáu - HUIT Student Management</title>
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- Custom CSS -->
    <link rel="stylesheet" href="static/css/style.css">
    
    
</head>
<body>
    <!-- Main Container -->
    <div class="app-container">
        <!-- Sidebar -->
        <nav class="sidebar">
            <!-- Header -->
            <div class="sidebar-header">
                <div class="sidebar-brand">
                    <span style="font-size: 20px;"> HUIT Academic <br>Grade Analysis</span>
                </div>
            </div>
            

            <!-- Navigation Menu -->
            <ul class="nav-menu">
                <li class="nav-item">
                    <a href="index.html" class="nav-link ">
                        <i data-lucide="home" class="nav-icon"></i>
                        <span>Dashboard</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="statistics.html" class="nav-link ">
                        <i data-lucide="bar-chart-3" class="nav-icon"></i>
                        <span>Th·ªëng k√™ chi ti·∫øt</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="students.html" class="nav-link ">
                        <i data-lucide="users" class="nav-icon"></i>
                        <span>Danh s√°ch sinh vi√™n</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/search" class="nav-link ">
                        <i data-lucide="search" class="nav-icon"></i>
                        <span>T√¨m ki·∫øm c∆° b·∫£n</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="advanced_search.html" class="nav-link ">
                        <i data-lucide="zap" class="nav-icon"></i>
                        <span>T√¨m ki·∫øm n√¢ng cao</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="compare.html" class="nav-link ">
                        <i data-lucide="git-compare" class="nav-icon"></i>
                        <span>So s√°nh d·ªØ li·ªáu</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/alerts" class="nav-link ">
                        <i data-lucide="alert-triangle" class="nav-icon"></i>
                        <span>C·∫£nh b√°o h·ªçc v·ª•</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="/reports" class="nav-link ">
                        <i data-lucide="file-text" class="nav-icon"></i>
                        <span>B√°o c√°o & Xu·∫•t file</span>
                    </a>
                </li>
                <li class="nav-item">
                    <a href="data_management.html" class="nav-link ">
                        <i data-lucide="database" class="nav-icon"></i>
                        <span>Qu·∫£n l√Ω d·ªØ li·ªáu</span>
                    </a>
                </li>
            </ul>
        </nav>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <header class="top-nav">
                <div class="nav-left">
                    <h1 class="page-title">Qu·∫£n l√Ω d·ªØ li·ªáu</h1>
                </div>
                <div class="nav-right">
                    <div class="search-box">
                        <i data-lucide="search" class="search-icon"></i>
                        <input type="text" placeholder="T√¨m ki·∫øm..." id="globalSearch">
                    </div>
                    <div class="user-info">
                        <div class="date-time">
                            <div class="date" id="currentDate"></div>
                            <div class="time" id="currentTime"></div>
                        </div>
                        <div class="user-avatar">
                            <i data-lucide="user" class="avatar-icon"></i>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Page Content -->
            <div class="content-wrapper">
                
                    
                
                
                
<!-- File Upload Section -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i data-lucide="upload"></i>
            T·∫£i l√™n d·ªØ li·ªáu
        </h3>
    </div>
    
    <div class="file-upload" id="fileUploadArea">
        <div style="margin-bottom: 1rem;">
            <i data-lucide="file-plus" style="width: 48px; height: 48px; color: #64748b;"></i>
        </div>
        <h4 style="color: #334155; margin-bottom: 0.5rem;">K√©o th·∫£ file ho·∫∑c click ƒë·ªÉ ch·ªçn</h4>
        <p style="color: #64748b; margin-bottom: 1rem;">
            H·ªó tr·ª£ file CSV, Excel (.xls, .xlsx). T·ªëi ƒëa 16MB
        </p>
        <input type="file" id="fileInput" accept=".csv,.xls,.xlsx" style="display: none;">
        <div class="btn btn-primary">
            <i data-lucide="folder"></i>
            Ch·ªçn file
        </div>
    </div>
</div>


<!-- Current Data Info -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i data-lucide="database"></i>
            Th√¥ng tin d·ªØ li·ªáu hi·ªán t·∫°i
        </h3>
        <div>
            <button class="btn btn-danger" onclick="clearData()">
                <i data-lucide="trash-2"></i>
                X√≥a d·ªØ li·ªáu
            </button>
        </div>
    </div>
    
    <div class="grid grid-2">
        <div class="data-info-item">
            <div class="info-label">T·ªïng s·ªë sinh vi√™n</div>
            <div class="info-value">3221</div>
        </div>
        <div class="data-info-item">
            <div class="info-label">S·ªë c·ªôt d·ªØ li·ªáu</div>
            <div class="info-value">13</div>
        </div>
        <div class="data-info-item">
            <div class="info-label">K√≠ch th∆∞·ªõc d·ªØ li·ªáu</div>
            <div class="info-value">2.1 MB</div>
        </div>
        <div class="data-info-item">
            <div class="info-label">C·∫≠p nh·∫≠t l·∫ßn cu·ªëi</div>
            <div class="info-value">H√¥m nay</div>
        </div>
    </div>
    
    
</div>

<!-- Data Actions -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i data-lucide="settings"></i>
            Thao t√°c d·ªØ li·ªáu
        </h3>
    </div>
    
    <div class="grid grid-3">
        <button class="btn btn-secondary" onclick="exportData('csv')">
            <i data-lucide="download"></i>
            Xu·∫•t CSV
        </button>
        <button class="btn btn-secondary" onclick="exportData('excel')">
            <i data-lucide="download"></i>
            Xu·∫•t Excel
        </button>
        <button class="btn btn-secondary" onclick="validateData()">
            <i data-lucide="check-circle"></i>
            Ki·ªÉm tra d·ªØ li·ªáu
        </button>
        <button class="btn btn-secondary" onclick="showDataPreview()">
            <i data-lucide="eye"></i>
            Xem tr∆∞·ªõc
        </button>
        <button class="btn btn-secondary" onclick="showDataStats()">
            <i data-lucide="bar-chart"></i>
            Th·ªëng k√™ c∆° b·∫£n
        </button>
        <button class="btn btn-secondary" onclick="cleanData()">
            <i data-lucide="refresh-cw"></i>
            L√†m s·∫°ch d·ªØ li·ªáu
        </button>
    </div>
</div>



<!-- Sample Data Section -->
<div class="card">
    <div class="card-header">
        <h3 class="card-title">
            <i data-lucide="file-text"></i>
            D·ªØ li·ªáu m·∫´u
        </h3>
    </div>
    
    <p style="color: #64748b; margin-bottom: 1.5rem;">
        T·∫£i xu·ªëng file d·ªØ li·ªáu m·∫´u ƒë·ªÉ hi·ªÉu ƒë·ªãnh d·∫°ng c·∫ßn thi·∫øt
    </p>
    
    <div class="grid grid-2" style="max-width: 400px;">
        <button class="btn btn-secondary" onclick="downloadSample('csv')">
            <i data-lucide="download"></i>
            T·∫£i m·∫´u CSV
        </button>
        <button class="btn btn-secondary" onclick="downloadSample('excel')">
            <i data-lucide="download"></i>
            T·∫£i m·∫´u Excel
        </button>
    </div>
</div>

            </div>
        </main>
    </div>
    
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="loading-spinner">
            <div class="spinner"></div>
            <div class="loading-text">ƒêang t·∫£i...</div>
        </div>
    </div>
    
    <!-- Scripts -->
    <script src="static/js/dashboard.js"></script>
    
<style>
.data-info-item {
    background: #f8fafc;
    padding: 1.5rem;
    border-radius: 8px;
    text-align: center;
}

.info-label {
    font-size: 0.875rem;
    color: #64748b;
    margin-bottom: 0.5rem;
    text-transform: uppercase;
    letter-spacing: 0.5px;
    font-weight: 500;
}

.info-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1e40af;
}

.columns-grid {
    display: flex;
    flex-wrap: wrap;
    gap: 0.5rem;
}

.column-tag {
    display: inline-flex;
    align-items: center;
    background: #eff6ff;
    color: #1d4ed8;
    padding: 0.5rem 1rem;
    border-radius: 20px;
    font-size: 0.875rem;
    font-weight: 500;
    border: 1px solid #bfdbfe;
}

.column-tag i {
    width: 14px;
    height: 14px;
    margin-right: 0.5rem;
}
</style>

<script>
function clearData() {
    if (confirm('B·∫°n c√≥ ch·∫Øc ch·∫Øn mu·ªën x√≥a to√†n b·ªô d·ªØ li·ªáu? H√†nh ƒë·ªông n√†y kh√¥ng th·ªÉ ho√†n t√°c.')) {
        // Implement clear data functionality
        console.log('Clearing data...');
    }
}

function exportData(format) {
    window.dashboardApp.showLoading();
    
    // Simulate export
    setTimeout(() => {
        window.dashboardApp.hideLoading();
        window.dashboardApp.showAlert('success', `ƒê√£ xu·∫•t d·ªØ li·ªáu ƒë·ªãnh d·∫°ng ${format.toUpperCase()}`);
    }, 2000);
}

function validateData() {
    window.dashboardApp.showLoading();
    
    // Simulate validation
    setTimeout(() => {
        window.dashboardApp.hideLoading();
        window.dashboardApp.showAlert('success', 'D·ªØ li·ªáu h·ª£p l·ªá - Kh√¥ng c√≥ l·ªói');
    }, 1500);
}

function showDataPreview() {
    window.location.href = '/students';
}

function showDataStats() {
    window.location.href = '/statistics';
}

function cleanData() {
    if (confirm('L√†m s·∫°ch d·ªØ li·ªáu s·∫Ω x√≥a c√°c d√≤ng tr·ªëng v√† chu·∫©n h√≥a ƒë·ªãnh d·∫°ng. Ti·∫øp t·ª•c?')) {
        window.dashboardApp.showLoading();
        
        setTimeout(() => {
            window.dashboardApp.hideLoading();
            window.dashboardApp.showAlert('success', 'ƒê√£ l√†m s·∫°ch d·ªØ li·ªáu th√†nh c√¥ng');
        }, 2000);
    }
}

function downloadSample(format) {
    // Create sample data
    const sampleData = [
        ['STT', 'H·ªç v√† t√™n', 'MSSV', 'L·ªõp', 'ƒêi·ªÉm TB', 'X·∫øp lo·∫°i'],
        ['1', 'Nguy·ªÖn VƒÉn A', '2021001', 'CNTT01', '8.5', 'Gi·ªèi'],
        ['2', 'Tr·∫ßn Th·ªã B', '2021002', 'CNTT01', '7.2', 'Kh√°'],
        ['3', 'L√™ VƒÉn C', '2021003', 'CNTT02', '6.8', 'Kh√°']
    ];
    
    if (format === 'csv') {
        const csvContent = sampleData.map(row => row.join(',')).join('\n');
        const blob = new Blob(['\ufeff' + csvContent], { type: 'text/csv;charset=utf-8;' });
        const link = document.createElement('a');
        link.href = URL.createObjectURL(blob);
        link.download = 'mau_du_lieu_sinh_vien.csv';
        link.click();
    } else {
        window.dashboardApp.showAlert('info', 'T√≠nh nƒÉng xu·∫•t Excel ƒëang ƒë∆∞·ª£c ph√°t tri·ªÉn');
    }
}
</script>

    
    <script>
        // Initialize Lucide icons
        lucide.createIcons();
        
        // Update date/time
        function updateDateTime() {
            const now = new Date();
            document.getElementById('currentDate').textContent = now.toLocaleDateString('vi-VN');
            document.getElementById('currentTime').textContent = now.toLocaleTimeString('vi-VN', {hour: '2-digit', minute: '2-digit'});
        }
        
        updateDateTime();
        setInterval(updateDateTime, 60000); // Update every minute
        
        // Load data info
        async function loadDataInfo() {
            try {
                const response = await fetch('/api/dashboard-data');
                if (response.ok) {
                    const data = await response.json();
                    const statsEl = document.getElementById('dataStats');
                    statsEl.innerHTML = `
                        <div>Sinh vi√™n: ${data.total_students || 0}</div>
                        <div>L·ªõp: ${data.total_classes || 0}</div>
                        <div>ƒêi·ªÉm TB: ${data.average_score || 0}</div>
                        <div>T·ª∑ l·ªá ƒë·∫≠u: ${data.pass_rate || 0}%</div>
                        <div>C·∫≠p nh·∫≠t: ${data.recent_updates || 'N/A'}</div>
                    `;
                }
            } catch (error) {
                console.error('Error loading data info:', error);
            }
        }
        
        // Load data info on page load
        document.addEventListener('DOMContentLoaded', loadDataInfo);
    </script>

    <script>
        // Static mode notice
        if (typeof window !== 'undefined') {
            console.log('Running in static mode - API endpoints disabled');
            
            // Disable form submissions
            document.addEventListener('DOMContentLoaded', function() {
                const forms = document.querySelectorAll('form');
                forms.forEach(form => {
                    form.addEventListener('submit', function(e) {
                        e.preventDefault();
                        alert('This is a static demo. Form submission is disabled.');
                    });
                });
                
                // Add static mode banner
                const banner = document.createElement('div');
                banner.innerHTML = `
                    <div style="background: #ff9800; color: white; padding: 10px; text-align: center; position: fixed; top: 0; left: 0; right: 0; z-index: 9999;">
                        üìå Static Demo Mode - Some features are disabled. 
                        <a href="https://github.com/InfinityZero3000/student-management-app" style="color: white; text-decoration: underline;">View Full Version</a>
                    </div>
                `;
                document.body.insertBefore(banner, document.body.firstChild);
                
                // Adjust body padding to account for banner
                document.body.style.paddingTop = '50px';
            });
        }
    </script>
</body>
</html>